{"main":{"title":"index.svelte","contents":"<script>\n  import { LayerCake, Svg, Html } from 'layercake';\n  import { scaleOrdinal } from 'd3-scale';\n\n  import Key from './components/Key.svelte';\n  import AxisX from './components/AxisX.svelte';\n  import Beeswarm from './components/Beeswarm.svelte';\n\n  // This example loads csv data as json using @rollup/plugin-dsv\n  import data from './data/us-senate.csv';\n\n  const xKey = 'date_of_birth';\n  const zKey = 'gender';\n\n  const seriesNames = new Set();\n  const seriesColors = ['#fc0', '#000'];\n\n  const dataTransformed = data.map(d => {\n    seriesNames.add(d[zKey]);\n\n    return {\n      [zKey]: d[zKey],\n      [xKey]: +d[xKey].split('-')[0]\n    }\n  })\n\n</script>\n\n<style>\n  /*\n    The wrapper div needs to have an explicit width and height in CSS.\n    It can also be a flexbox child or CSS grid element.\n    The point being it needs dimensions since the <LayerCake> element will\n    expand to fill it.\n  */\n  .chart-container {\n    width: 100%;\n    height: 100%;\n  }\n</style>\n\n<div class='chart-container'>\n  <LayerCake\n    x={xKey}\n    z={zKey}\n    zScale={scaleOrdinal()}\n    zDomain={Array.from(seriesNames)}\n    zRange={seriesColors}\n    data={dataTransformed}\n  >\n\n    <Svg>\n      <AxisX/>\n      <Beeswarm\n        r={6}\n        spacing={0.5}\n        xStrength={0.95}\n        yStrength={0.075}\n      />\n    </Svg>\n\n    <Html pointerEvents={false}>\n      <Key shape='circle' />\n    </Html>\n\n  </LayerCake>\n</div>"},"dek":"","components":[{"title":"./components/Key.svelte","contents":"<script>\n  import { getContext } from 'svelte';\n\n  /* --------------------------------------------\n   * Can be: \"circle\", \"line\" or \"square\"\n   */\n  export let shape = 'square';\n\n  /* --------------------------------------------\n   * Capitalize the series name: `true` or `false`\n   */\n  export let capitalize = true;\n\n  const { zDomain, zScale } = getContext('LayerCake');\n\n  function cap (str) {\n    return str.replace(/^\\w/, d => d.toUpperCase());\n  }\n</script>\n\n<style>\n  .key {\n    display: flex;\n  }\n  .key-item {\n    margin-right: 14px;\n  }\n  .chip {\n    display: inline-block;\n    position: relative;\n    width: 12px;\n    height: 12px;\n  }\n  .chip__circle {\n    border-radius: 50%;\n  }\n  .chip__line:after {\n    content: '';\n    position: absolute;\n    border-width: 3px;\n    width: 14px;\n    transform: rotate(-45deg);\n    transform-origin: 14px 5px;\n  }\n  .name {\n    display: inline;\n    font-size: 14px;\n    text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;\n  }\n</style>\n\n<div class='key'>\n  {#each $zDomain as item}\n  <div class='key-item'>\n    <div\n      class='chip chip__{shape}'\n      style='background: {\n        shape === `line` ?\n        `linear-gradient(-45deg, #ffffff 40%, ${$zScale(item)} 41%, ${$zScale(item)} 59%, #ffffff 60%)`\n        : $zScale(item)};'\n    ></div>\n    <div class='name'>{capitalize === true ? cap(item) : item}</div>\n  </div>\n  {/each}\n</div>"},{"title":"./components/AxisX.svelte","contents":"<script>\n  import { getContext } from 'svelte';\n\n  const { width, height, xScale, yScale, yRange } = getContext('LayerCake');\n\n  export let gridlines = true;\n  export let formatTick = d => d;\n  export let baseline = false;\n  export let snapTicks = false;\n  export let ticks = undefined;\n  export let xTick = undefined;\n  export let yTick = 16;\n  export let dxTick = 0;\n  export let dyTick = 0;\n\n  $: isBandwidth = typeof $xScale.bandwidth === 'function';\n\n  $: tickVals = Array.isArray(ticks) ? ticks :\n    isBandwidth ?\n      $xScale.domain() :\n      typeof ticks === 'function' ?\n        ticks($xScale.ticks()) :\n          $xScale.ticks(ticks);\n\n  function textAnchor(i) {\n    if (snapTicks === true) {\n      if (i === 0) {\n        return 'start';\n      }\n      if (i === tickVals.length - 1) {\n        return 'end';\n      }\n    }\n    return 'middle';\n  }\n</script>\n\n<g class='axis x-axis'>\n  {#each tickVals as tick, i}\n    <g class='tick tick-{ tick }' transform='translate({$xScale(tick)},{$yRange[0]})'>\n      {#if gridlines !== false}\n        <line y1='{$height * -1}' y2='0' x1='0' x2='0'></line>\n      {/if}\n      <text\n        x=\"{xTick || isBandwidth ? $xScale.bandwidth() / 2 : 0 }\"\n        y='{yTick}'\n        dx='{dxTick}'\n        dy='{dyTick}'\n        text-anchor='{textAnchor(i)}'>{formatTick(tick)}</text>\n    </g>\n  {/each}\n  {#if baseline === true}\n    <line class=\"baseline\" y1='{$height + 0.5}' y2='{$height + 0.5}' x1='0' x2='{$width}'></line>\n  {/if}\n</g>\n\n<style>\n  .tick {\n    font-size: .725em;\n    font-weight: 200;\n  }\n\n  line,\n  .tick line {\n    stroke: #aaa;\n    stroke-dasharray: 2;\n  }\n\n  .tick text {\n    fill: #666;\n  }\n\n  .baseline {\n    stroke-dasharray: 0;\n  }\n</style>"},{"title":"./components/Beeswarm.svelte","contents":"<script>\n  import { getContext } from 'svelte';\n  import { forceSimulation, forceX, forceY, forceCollide } from 'd3-force';\n\n  const { data, xGet, width, height, zGet } = getContext('LayerCake');\n\n  const nodes = $data.map((d) => ({ ...d }));\n\n  export let r = 4;\n  export let spacing = 0.5;\n  export let xStrength = 0.95;\n  export let yStrength = 0.075;\n  export let strokeColor = '#fff';\n\n  let radius = r;\n  $: {\n    radius = $width < 400 ? r / 2 : r;\n  }\n\n  $: simulation = forceSimulation(nodes)\n    .force('x', forceX().x(d => $xGet(d)).strength(xStrength))\n    .force('y', forceY().y($height / 2).strength(yStrength))\n    .force('collide', forceCollide(radius + spacing))\n    .stop();\n\n  $: {\n    for ( var i = 0,\n      n = Math.ceil(Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()));\n      i < n;\n      ++i ) {\n      simulation.tick();\n    }\n  }\n</script>\n\n<g class='bee-group'>\n  {#each simulation.nodes() as node}\n    <circle\n      fill='{$zGet(node)}'\n      stroke='{strokeColor}'\n      stroke-width='{spacing / 2}'\n      cx='{node.x}'\n      cy='{node.y}'\n      r='{radius}'\n      />\n  {/each}\n</g>"}],"modules":[],"componentModules":[],"componentComponents":[],"csvs":[{"title":"./data/us-senate.csv","contents":"state_name,party,name,gender,date_of_birth\r\nAlaska,R,Daniel Sullivan,male,1964-11-13\r\nAlaska,R,Lisa Murkowski,female,1957-05-22\r\nAlabama,D,Gordon Jones,male,1954-05-04\r\nAlabama,R,Richard Shelby,male,1934-05-06\r\nArkansas,R,John Boozman,male,1950-12-10\r\nArkansas,R,Tom Cotton,male,1977-05-13\r\nArizona,D,Kyrsten Sinema,female,1976-07-12\r\nArizona,R,Martha McSally,female,1966-03-22\r\nCalifornia,D,Dianne Feinstein,female,1933-06-22\r\nCalifornia,D,Kamala Harris,female,1964-10-20\r\nColorado,R,Cory Gardner,male,1974-08-22\r\nColorado,D,Michael Bennet,male,1964-11-28\r\nConnecticut,D,Christopher Murphy,male,1973-08-03\r\nConnecticut,D,Richard Blumenthal,male,1946-02-13\r\nDelaware,D,Christopher Coons,male,1963-09-09\r\nDelaware,D,Thomas Carper,male,1947-01-23\r\nFlorida,R,Rick Scott,male,1952-12-01\r\nFlorida,R,Marco Rubio,male,1971-05-28\r\nGeorgia,R,David Perdue,male,1949-12-10\r\nGeorgia,R,Johnny Isakson,male,1944-12-28\r\nHawaii,D,Brian Schatz,male,1972-10-20\r\nHawaii,D,Mazie Hirono,female,1947-11-03\r\nIowa,R,Joni Ernst,female,1970-07-01\r\nIllinois,D,Richard Durbin,male,1944-11-21\r\nIdaho,R,James Risch,male,1943-05-03\r\nIllinois,D,Tammy Duckworth,female,1968-03-12\r\nIndiana,R,Todd Young,male,1972-08-24\r\nKansas,R,Jerry Moran,male,1954-05-29\r\nKansas,R,Pat Roberts,male,1936-04-20\r\nKentucky,R,Mitch McConnell,male,1942-02-20\r\nKentucky,R,Rand Paul,male,1963-01-07\r\nLouisiana,R,Bill Cassidy,male,1957-09-28\r\nLouisiana,R,John Kennedy,male,1951-11-21\r\nMassachusetts,D,Edward Markey,male,1946-11-11\r\nMassachusetts,D,Elizabeth Warren,female,1949-06-22\r\nMaryland,D,Benjamin Cardin,male,1943-10-05\r\nMaryland,D,Chris Van Hollen,male,1959-01-10\r\nMaine,I,Angus King,male,1944-03-31\r\nMaine,R,Susan Collins,female,1952-12-07\r\nMichigan,D,Debbie Stabenow,female,1950-04-29\r\nMichigan,D,Gary Peters,male,1958-01-01\r\nMinnesota,D,Tina Smith,female,1958-03-04\r\nMinnesota,D,Amy Klobuchar,female,1960-05-25\r\nMissouri,R,Josh Hawley,male,1979-12-31\r\nIndiana,R,Mike Braun,male,1954-03-24\r\nMississippi,R,Roger Wicker,male,1951-07-05\r\nMississippi,R,Cindy Hyde-Smith,female,1959-05-10\r\nIowa,R,Charles Grassley,male,1933-09-17\r\nMontana,R,Steve Daines,male,1962-08-20\r\nIdaho,R,Mike Crapo,male,1951-05-20\r\nMissouri,R,Roy Blunt,male,1950-01-10\r\nNorth Dakota,R,Kevin Cramer,male,1961-01-21\r\nNorth Dakota,R,John Hoeven,male,1957-03-13\r\nMontana,D,Jon Tester,male,1956-08-21\r\nNorth Carolina,R,Richard Burr,male,1955-11-30\r\nNorth Carolina,R,Thom Tillis,male,1960-08-30\r\nNebraska,R,Ben Sasse,male,1972-02-22\r\nNebraska,R,Deb Fischer,female,1951-03-01\r\nNew Hampshire,D,Jeanne Shaheen,female,1947-01-28\r\nNew Hampshire,D,Margaret Hassan,female,1958-02-27\r\nNew Jersey,D,Cory Booker,male,1969-04-27\r\nNew Jersey,D,Robert Menendez,male,1954-01-01\r\nNew Mexico,D,Martin Heinrich,male,1971-10-17\r\nNew Mexico,D,Tom Udall,male,1948-05-18\r\nNevada,D,Catherine Cortez-Masto,female,1964-03-29\r\nNevada,D,Jacky Rosen,female,1957-08-02\r\nNew York,D,Charles Schumer,male,1950-11-23\r\nNew York,D,Kirsten Gillibrand,female,1966-12-09\r\nOhio,R,Rob Portman,male,1955-12-19\r\nOhio,D,Sherrod Brown,male,1952-11-09\r\nOklahoma,R,James Inhofe,male,1934-11-17\r\nOklahoma,R,James Lankford,male,1968-03-04\r\nOregon,D,Jeff Merkley,male,1956-10-24\r\nOregon,D,Ron Wyden,male,1949-05-03\r\nPennsylvania,R,Patrick Toomey,male,1961-11-17\r\nPennsylvania,D,Robert Casey,male,1960-04-13\r\nRhode Island,D,Jack Reed,male,1949-11-12\r\nRhode Island,D,Sheldon Whitehouse,male,1955-10-20\r\nSouth Carolina,R,Lindsey Graham,male,1955-07-09\r\nSouth Carolina,R,Tim Scott,male,1965-09-19\r\nSouth Dakota,R,John Thune,male,1961-01-07\r\nSouth Dakota,R,Mike Rounds,male,1954-10-24\r\nTennessee,R,Marsha Blackburn,female,1952-06-06\r\nTennessee,R,Lamar Alexander,male,1940-07-03\r\nTexas,R,John Cornyn,male,1952-02-02\r\nTexas,R,Ted Cruz,male,1970-12-22\r\nUtah,R,Mike Lee,male,1971-06-04\r\nUtah,R,Mitt Romney,male,1947-03-12\r\nVirginia,D,Mark Warner,male,1954-12-15\r\nVirginia,D,Tim Kaine,male,1958-02-26\r\nVermont,I,Bernard Sanders,male,1941-09-08\r\nVermont,D,Patrick Leahy,male,1940-03-31\r\nWashington,D,Maria Cantwell,female,1958-10-13\r\nWashington,D,Patty Murray,female,1950-10-11\r\nWisconsin,R,Ron Johnson,male,1955-04-08\r\nWisconsin,D,Tammy Baldwin,female,1962-02-11\r\nWest Virginia,D,Joe Manchin,male,1947-08-24\r\nWest Virginia,R,Shelley Capito,female,1953-11-26\r\nWyoming,R,John Barrasso,male,1952-07-21\r\nWyoming,R,Michael Enzi,male,1944-02-01"}],"jsons":[]}